{
  "openapi": "3.0.3",
  "info": {
    "title": "Hyperledger Cactus Plugin - Connector Iroha V2",
    "description": "Can perform basic tasks on a Iroha V2 ledger",
    "version": "1.0.0",
    "license": {
      "name": "Apache 2.0",
      "url": "https://www.apache.org/licenses/LICENSE-2.0.html"
    }
  },
  "components": {
    "schemas": {
      "IrohaInstruction": {
        "type": "string",
        "enum": [
          "registerDomain",
          "registerAssetDefinition"
        ],
        "x-enum-descriptions": [
          "Register new domain",
          "Register new asset definition"
        ],
        "x-enum-varnames": [
          "RegisterDomain",
          "RegisterAssetDefinition"
        ]
      },
      "IrohaQuery": {
        "type": "string",
        "enum": [
          "findAllDomains",
          "findDomainById",
          "findAssetDefinitionById"
        ],
        "x-enum-descriptions": [
          "Get list of all registered domains",
          "Get domain with specified ID",
          "Get asset definition with specified ID"
        ],
        "x-enum-varnames": [
          "FindAllDomains",
          "FindDomainById",
          "FindAssetDefinitionById"
        ]
      },
      "WatchBlocksV1": {
        "type": "string",
        "description": "Websocket requests for monitoring new blocks.",
        "enum": [
          "org.hyperledger.cactus.api.async.hliroha2.WatchBlocksV1.Subscribe",
          "org.hyperledger.cactus.api.async.hliroha2.WatchBlocksV1.Next",
          "org.hyperledger.cactus.api.async.hliroha2.WatchBlocksV1.Unsubscribe",
          "org.hyperledger.cactus.api.async.hliroha2.WatchBlocksV1.Error",
          "org.hyperledger.cactus.api.async.hliroha2.WatchBlocksV1.Complete"
        ],
        "x-enum-varnames": [
          "Subscribe",
          "Next",
          "Unsubscribe",
          "Error",
          "Complete"
        ]
      },
      "WatchBlocksListenerTypeV1": {
        "type": "string",
        "description": "Response type from WatchBlocks.",
        "enum": [
          "binary"
        ],
        "x-enum-varnames": [
          "Binary"
        ]
      },
      "WatchBlocksOptionsV1": {
        "type": "object",
        "description": "Options passed when subscribing to block monitoring.",
        "properties": {
          "type": {
            "$ref": "#/components/schemas/WatchBlocksListenerTypeV1",
            "description": "Type of response block to return.",
            "default": "WatchBlocksListenerTypeV1.Binary",
            "nullable": false
          },
          "startBlock": {
            "type": "string",
            "minLength": 1,
            "nullable": false
          },
          "baseConfig": {
            "$ref": "#/components/schemas/Iroha2BaseConfig",
            "nullable": false
          }
        }
      },
      "WatchBlocksBinaryResponseV1": {
        "type": "object",
        "description": "response.",
        "required": [
          "binaryBlock"
        ],
        "properties": {
          "binaryBlock": {
            "type": "string",
            "format": "binary",
            "nullable": false
          }
        }
      },
      "WatchBlocksResponseV1": {
        "oneOf": [
          {
            "$ref": "#/components/schemas/WatchBlocksBinaryResponseV1",
            "nullable": false
          },
          {
            "$ref": "#/components/schemas/ErrorExceptionResponseV1",
            "nullable": false
          }
        ]
      },
      "Iroha2AccountId": {
        "type": "object",
        "additionalProperties": false,
        "nullable": false,
        "required": [
          "name",
          "domainId"
        ],
        "properties": {
          "name": {
            "type": "string",
            "nullable": false
          },
          "domainId": {
            "type": "string",
            "nullable": false
          }
        }
      },
      "Iroha2KeyJson": {
        "type": "object",
        "additionalProperties": false,
        "nullable": false,
        "required": [
          "digestFunction",
          "payload"
        ],
        "properties": {
          "digestFunction": {
            "type": "string",
            "nullable": false
          },
          "payload": {
            "type": "string",
            "nullable": false
          }
        }
      },
      "KeychainReference": {
        "type": "object",
        "required": [
          "keychainId",
          "keychainRef"
        ],
        "properties": {
          "keychainId": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "nullable": false
          },
          "keychainRef": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "nullable": false
          }
        }
      },
      "Iroha2KeyPair": {
        "type": "object",
        "required": [
          "privateKey",
          "publicKey"
        ],
        "properties": {
          "privateKey": {
            "$ref": "#/components/schemas/Iroha2KeyJson",
            "nullable": false
          },
          "publicKey": {
            "type": "string",
            "nullable": false
          }
        }
      },
      "Iroha2BaseConfigTorii": {
        "type": "object",
        "additionalProperties": false,
        "nullable": false,
        "properties": {
          "apiURL": {
            "type": "string",
            "nullable": false
          },
          "telemetryURL": {
            "type": "string",
            "nullable": false
          }
        }
      },
      "Iroha2BaseConfigTransaction": {
        "type": "object",
        "additionalProperties": false,
        "nullable": false,
        "properties": {
          "timeToLiveMs": {
            "type": "string",
            "nullable": false
          },
          "addNonce": {
            "type": "boolean",
            "nullable": false
          }
        }
      },
      "Iroha2BaseConfig": {
        "type": "object",
        "additionalProperties": true,
        "required": [
          "torii"
        ],
        "properties": {
          "torii": {
            "$ref": "#/components/schemas/Iroha2BaseConfigTorii",
            "nullable": false
          },
          "accountId": {
            "$ref": "#/components/schemas/Iroha2AccountId",
            "nullable": false
          },
          "signingCredential": {
            "oneOf": [
              {
                "$ref": "#/components/schemas/Iroha2KeyPair",
                "nullable": false
              },
              {
                "$ref": "#/components/schemas/KeychainReference",
                "nullable": false
              }
            ]
          },
          "transaction": {
            "$ref": "#/components/schemas/Iroha2BaseConfigTransaction",
            "nullable": false
          }
        }
      },
      "IrohaInstructionRequestV1": {
        "type": "object",
        "required": [
          "name",
          "params"
        ],
        "additionalProperties": false,
        "properties": {
          "name": {
            "type": "IrohaInstruction",
            "nullable": false
          },
          "params": {
            "description": "The list of arguments to pass in to the transaction request.",
            "type": "array",
            "items": {}
          }
        }
      },
      "TransactRequestV1": {
        "type": "object",
        "required": [
          "instruction"
        ],
        "additionalProperties": false,
        "properties": {
          "instruction": {
            "oneOf": [
              {
                "$ref": "#/components/schemas/IrohaInstructionRequestV1",
                "nullable": false
              },
              {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/IrohaInstructionRequestV1"
                }
              }
            ]
          },
          "baseConfig": {
            "$ref": "#/components/schemas/Iroha2BaseConfig",
            "nullable": false
          }
        }
      },
      "TransactResponseV1": {
        "type": "object",
        "required": [
          "status"
        ],
        "properties": {
          "status": {
            "type": "string",
            "nullable": false
          }
        }
      },
      "QueryRequestV1": {
        "type": "object",
        "required": [
          "queryName"
        ],
        "additionalProperties": false,
        "properties": {
          "queryName": {
            "type": "IrohaQuery",
            "nullable": false
          },
          "baseConfig": {
            "$ref": "#/components/schemas/Iroha2BaseConfig",
            "nullable": false
          },
          "params": {
            "description": "The list of arguments to pass in to the query request.",
            "type": "array",
            "items": {}
          }
        }
      },
      "QueryResponseV1": {
        "type": "object",
        "required": [
          "response"
        ],
        "properties": {
          "response": {
            "nullable": false
          }
        }
      },
      "ErrorExceptionResponseV1": {
        "type": "object",
        "required": [
          "message",
          "error"
        ],
        "properties": {
          "message": {
            "type": "string",
            "nullable": false
          },
          "error": {
            "type": "string",
            "nullable": false
          }
        }
      }
    }
  },
  "paths": {
    "/api/v1/plugins/@hyperledger/cactus-plugin-ledger-connector-iroha2/transact": {
      "post": {
        "x-hyperledger-cactus": {
          "http": {
            "verbLowerCase": "post",
            "path": "/api/v1/plugins/@hyperledger/cactus-plugin-ledger-connector-iroha2/transact"
          }
        },
        "operationId": "TransactV1",
        "summary": "Executes a transaction on a Iroha V2 ledger",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TransactRequestV1"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TransactResponseV1"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorExceptionResponseV1"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/plugins/@hyperledger/cactus-plugin-ledger-connector-iroha2/query": {
      "post": {
        "x-hyperledger-cactus": {
          "http": {
            "verbLowerCase": "post",
            "path": "/api/v1/plugins/@hyperledger/cactus-plugin-ledger-connector-iroha2/query"
          }
        },
        "operationId": "QueryV1",
        "summary": "Executes a query on a Iroha V2 ledger",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/QueryRequestV1"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QueryResponseV1"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorExceptionResponseV1"
                }
              }
            }
          }
        }
      }
    }
  }
}